**Aiogram** ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è [[5.–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å|–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è ]] –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Telegram-–±–æ—Ç–æ–≤ –Ω–∞ Python. –û–Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram Bot API, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –µ–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–º–µ–¥–∏–∞, –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏, –ø–ª–∞—Ç–µ–∂–∏, –≤–µ–±—Ö—É–∫–∏ –∏ —Ç. –¥.) –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ä–µ–¥—ã

1. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ Python 3.9+:
```bash
python3.9 --version
```

2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
```bash
python3.11 -m venv venv
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (aiogram 3.x –∏ pydantic-settings):
```bash
echo "aiogram<4.0" > requirements.txt
echo "pydantic-settings" >> requirements.txt
source venv/bin/activate
pip install -r requirements.txt
```

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç–∏–≤–∞—Ü–∏—é venv (–≤ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–∏ –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–µ—Ñ–∏–∫—Å "(venv)").

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è PyCharm

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–ª–∞–≥–∏–Ω Pydantic –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞.

## –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –±–æ—Ç–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

1. –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª `bot.py`:
```python
import asyncio
import logging
from aiogram import Bot, Dispatcher, types
from aiogram.filters.command import Command

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.INFO)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
bot = Bot(token="YOUR_BOT_TOKEN")
dp = Dispatcher()

# –•—ç–Ω–¥–ª–µ—Ä –∫–æ–º–∞–Ω–¥—ã /start
@dp.message(Command("start"))
async def cmd_start(message: types.Message):
    await message.answer("Hello!")

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
async def main():
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ aiogram

- –í—Å–µ —Ö—ç–Ω–¥–ª–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ (`async def`)
- –î–ª—è –≤—ã–∑–æ–≤–æ–≤ API Telegram –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `await`
- –î–∏—Å–ø–µ—Ç—á–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç —Ö—ç–Ω–¥–ª–µ—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ö—ç–Ω–¥–ª–µ—Ä–æ–≤ –≤–æ–∑–º–æ–∂–Ω–∞ —á–µ—Ä–µ–∑ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –∏–ª–∏ —è–≤–Ω—ã–π –≤—ã–∑–æ–≤ `dp.message.register()`

## –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

```python
@dp.message(Command("answer"))
async def cmd_answer(message: types.Message):
    await message.answer("–ü—Ä–æ—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ")

@dp.message(Command("reply"))
async def cmd_reply(message: types.Message):
    await message.reply('–û—Ç–≤–µ—Ç —Å —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º')
```

### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π

```python
from aiogram.enums.dice_emoji import DiceEmoji

@dp.message(Command("dice"))
async def cmd_dice(message: types.Message):
    await message.answer_dice(emoji="üé≤")
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

1. –°–æ–∑–¥–∞–π—Ç–µ `config_reader.py`:
```python
from pydantic_settings import BaseSettings, SettingsConfigDict
from pydantic import SecretStr

class Settings(BaseSettings):
    bot_token: SecretStr
    model_config = SettingsConfigDict(env_file='.env', env_file_encoding='utf-8')

config = Settings()
```

2. –§–∞–π–ª `.env`:
```
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
```

3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `bot.py`:
```python
from config_reader import config

bot = Bot(token=config.bot_token.get_secret_value())
```

## –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –º–µ–∂–¥—É —Ö—ç–Ω–¥–ª–µ—Ä–∞–º–∏

```python
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
dp = Dispatcher()
dp["started_at"] = datetime.now().strftime("%Y-%m-%d %H:%M")

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ö—ç–Ω–¥–ª–µ—Ä–∞—Ö
@dp.message(Command("info"))
async def cmd_info(message: types.Message, started_at: str):
    await message.answer(f"–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω {started_at}")
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–æ –±–∞–∑–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è Telegram-–±–æ—Ç–∞ —Å aiogram 3.x. –í —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Telegram Bot API.